<!--Modal-->

<hr />
<button
  style="margin: 50px; padding: 10px"
  type="button"
  class="btn btn-primary"
  (click)="openPopup()">Crear Cliente
</button>
<div
  class="modal"
  tabindex="-1"
  role="dialog"
  [ngStyle]="{'display':displayStyle}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="card mt-4">
              <div class="card-body">
                <div class="form-group">
                  <h1>Datos Cliente</h1>
                  <input
                    type="text"
                    placeholder="ingrese nombre"
                    class="form-control"
                    [(ngModel)]="nombre"
                  />
                </div>
                <br />
                <div class="form-group">
                  <input
                    type="text"
                    placeholder="ingrese apellido"
                    class="form-control"
                    [(ngModel)]="apellido"
                  />
                </div>
                <br/>
                <div class="form-group">
                    <input
                      type="number"
                      placeholder="ingrese telefono"
                      class="form-control"
                      [(ngModel)]="telefono"
                    />
                  </div>
                <br />
                <div class="form-group">
                  <input
                    type="text"
                    placeholder="ingrese email"
                    class="form-control"
                    [(ngModel)]="email"
                  />
                </div>
                <br/>
                <div class="form-group">
                  <input
                    type="number"
                    placeholder="ingrese número de documento"
                    class="form-control"
                    [(ngModel)]="documento"
                  />
                </div>
                <br/>
                <div class="form-group">
                  <label>Ciudad:</label>
                  <br>
                  <select name="id_categoria" [(ngModel)]="ciudadSeleccionada">
                      <option *ngFor="let cl of ciudadLista" [value]="cl.idCiudad">{{cl.nombreCiudad}}</option>
                  </select>
                </div>
                <br>
                <!--<div class="form-group">
                  <input
                    type="number"
                    placeholder="inserte codigo categoria"
                    class="form-control"
                    [(ngModel)]="producto.idCategoria"
                  />
                </div>-->
                <br>
                <div class="modal-footer">
                  <button class="btn btn-primary" (click)="crear()">Enviar</button>
                  <button type="button" class="btn btn-danger" 
                (click)="closePopup()">Cerrar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- tabla-->
<div class="form-control">
  <h4>Buscar por nombre del cliente:</h4>
  <input type="text" class="form-control" [(ngModel)]="filterNC" placeholder="Buscar...." name="filterNC">
</div>
<table class="table">
  <thead class="table-dark">
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Nombre</th>
      <th scope="col">Apellido</th>
      <th scope="col">Telefono</th>
      <th scope="col">Email</th>
      <th scope="col">Documento</th>
      <th scope="col">Ciudad</th>
      <th scope="col">Opciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let cliente of clienteLista | filterCliente:filterNC">
      <th>{{cliente.id}}</th>
      <th>{{cliente.nombre}}</th>
      <td>{{cliente.apellido}}</td>
      <td>{{cliente.telefono}}</td>
      <td>{{cliente.email}}</td>
      <td>{{cliente.documento}}</td>
      <td>{{cliente.ciudad.nombreCiudad}}</td>
      <td><button class="btn btn-primary" (click)="openPopupUpdate(cliente)">Editar</button>
        <button class="btn btn-danger" (click)="eliminar(cliente.id)">Eliminar</button></td>
    </tr>
  </tbody>
</table>


<!--Modal de actualizacion-->

<div
  class="modal"
  tabindex="-1"
  role="dialog"
  [ngStyle]="{'display':displayStyleUpdate}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="card mt-4">
              <div class="card-body">
                <div class="form-group">
                  <h1>Datos Cliente</h1>
                  <input
                    type="text"
                    placeholder="ingrese nombre"
                    class="form-control"
                    [(ngModel)]="nombre"
                  />
                </div>
                <br />
                <div class="form-group">
                  <input
                    type="text"
                    placeholder="ingrese apellido"
                    class="form-control"
                    [(ngModel)]="apellido"
                  />
                </div>
                <br/>
                <div class="form-group">
                    <input
                      type="number"
                      placeholder="ingrese telefono"
                      class="form-control"
                      [(ngModel)]="telefono"
                    />
                  </div>
                <br />
                <div class="form-group">
                  <input
                    type="text"
                    placeholder="ingrese email"
                    class="form-control"
                    [(ngModel)]="email"
                  />
                </div>
                <br />
                <div class="form-group">
                  <input
                    type="number"
                    placeholder="ingrese número de documento"
                    class="form-control"
                    [(ngModel)]="documento"
                  />
                </div>
                <br/>
                <div class="form-group">
                  <label>Ciudad:</label>
                  <br>
                  <select name="id_categoria" [(ngModel)]="ciudadSeleccionada">
                      <option *ngFor="let cl of ciudadLista" [value]="cl.idCiudad">{{cl.nombreCiudad}}</option>
                  </select>
                </div>
                <br>
                <!--<div class="form-group">
                  <input
                    type="number"
                    placeholder="inserte codigo categoria"
                    class="form-control"
                    [(ngModel)]="producto.idCategoria"
                  />
                </div>-->
                <br>
                <div class="modal-footer">
                  <button class="btn btn-primary" (click)="actualizar()">Actualizar</button>
                  <button type="button" class="btn btn-danger" 
                (click)="closePopupUpdate()">Cerrar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


